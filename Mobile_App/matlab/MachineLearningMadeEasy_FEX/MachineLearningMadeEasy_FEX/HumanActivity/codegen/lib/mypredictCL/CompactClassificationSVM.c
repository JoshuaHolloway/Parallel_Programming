/*
 * Academic License - for use in teaching, academic research, and meeting
 * course requirements at degree granting institutions only.  Not for
 * government, commercial, or other organizational use.
 * File: CompactClassificationSVM.c
 *
 * MATLAB Coder version            : 4.0
 * C/C++ source code generated on  : 04-Apr-2018 05:25:33
 */

/* Include Files */
#include <math.h>
#include <string.h>
#include "rt_nonfinite.h"
#include "mypredictCL.h"
#include "CompactClassificationSVM.h"
#include "repmat.h"
#include "Gaussian.h"
#include "bsxfun.h"

/* Function Definitions */

/*
 * Arguments    : const double obj_Alpha[176]
 *                const double obj_Mu[2]
 *                const double obj_Sigma[2]
 *                const double obj_ClassNames[2]
 *                const double obj_NonzeroProbClasses[2]
 *                const double X[30]
 *                double S[30]
 * Return Type  : void
 */
void CompactClassificationSVM_score(const double obj_Alpha[176], const double
  obj_Mu[2], const double obj_Sigma[2], const double obj_ClassNames[2], const
  double obj_NonzeroProbClasses[2], const double X[30], double S[30])
{
  double b_X[30];
  int trueCount;
  int i;
  int partialTrueCount;
  int b_partialTrueCount;
  int X_size[2];
  int tmp_data[2];
  int i4;
  int b_tmp_data[2];
  int obj_Sigma_size[2];
  double X_data[30];
  double obj_Sigma_data[2];
  double c_tmp_data[30];
  double f[15];
  static const double dv71[352] = { -0.37277704635077558, 1.1917453975936794,
    2.4116959968337213, -1.5522128572793967, 12.015550807233808,
    1.7827655491515235, -0.48907211498814029, 2.1453454590224807,
    -0.3499311926176763, -1.6836785850193072, -0.54570452035534367,
    1.6629802331658399, 2.5274723998650637, 1.8098494359793207,
    -0.44156341378476721, -2.6472137422336033, 4.8163971392130653,
    -0.47828244217564064, -0.61573881384214246, 2.1391866008515441,
    -0.3979580360655906, 2.628951352944672, -0.46435807121515521,
    -2.1688597812316481, 2.2710787593559205, -1.0792423842985843,
    -0.28309577028033328, -1.2011096725725097, -0.56317438356460725,
    -0.73521543605504214, -0.39975083161241731, 1.1907656242508691,
    -0.40546950656646541, 0.23140676198713722, -0.25614024801278418,
    1.1974066795832206, -0.2145288738209882, -2.63616595297003,
    -0.29166337020301042, 1.1958754926927317, -0.46681706263945105,
    2.62601156573364, -0.26167063881506614, 2.6355582973398897,
    -0.26293358793955074, -2.6385895047097092, -0.44440988171297713,
    -2.167829344329431, -0.56913980241758877, -0.25582068749332343,
    -0.52037599882081842, -1.6920663754455518, -0.58491891432779253,
    2.6201144061872315, -0.39222992529295514, 1.6704262157699354,
    5.7754381567751771, 2.9238469488443948, -0.55084072406214579,
    -0.73445361305259071, -0.29099062285667504, -1.6810925610555989,
    -0.29141357692871173, -1.6809721135583129, -0.34446212283751254,
    0.713846431898561, -0.52301885100209244, -1.2125650340696426,
    4.4424671756546052, 1.900961628437001, -0.45374055891038312,
    1.6675417011111544, -0.38879608337988331, 1.670656615464126,
    -0.62455677667747667, 2.1388228819743165, -0.50455130665582437,
    -2.6502706593766865, 2.1933265246967588, -0.60360442197408071,
    -0.306317377470776, -0.722828363582803, 27.76393204967237,
    3.4929996729612118, -0.50205087519127334, 0.22667359498079492,
    -0.5105049785220841, -1.212176504596193, -0.59331406540784093,
    2.6197925962687743, 15.586815472807817, 1.4737969940658791,
    2.9395350036211356, -2.4858805129932846, 4.6204991373500226,
    -0.96716386866070536, 3.8592543652676827, -1.003447983396383,
    -0.24380022962258455, 1.1981064395244605, -0.52856092052747883,
    -1.2129559989156169, -0.29811053308654434, -1.6813573061091054,
    -0.374330332792268, -0.24649991018699829, -0.32497387644819209,
    -1.6826314909795421, -0.55479353781452323, -0.73478824057730074,
    -0.57879920762859849, -0.25643919728253184, -0.577384124176784,
    0.22316672235796817, -0.54663357725880823, 2.6219272964957505,
    -0.55502091568119416, 1.6626618007926264, -0.34566817487381313,
    0.23435569114531316, -0.51964047388152856, 0.70537598543632751,
    -0.54773016549097264, 0.70406593816396146, -0.1946285000086001,
    -2.6354304844959544, -0.63689457684745854, 2.6176408427981848,
    -0.35804860901144858, 0.23365169315663079, -0.32050545643827072,
    -1.6824258526316611, 1.9889767021808544, 0.34561037265424044,
    -0.30164305332698615, -1.2020975216785494, 3.5397923543408343,
    0.89925494375679293, -0.35062252865777443, 2.6314167861390367,
    -0.35241464800646716, 2.1517733003715973, -0.32308458399109213,
    1.1942711842217704, -0.60894336287104633, 2.6189024214632646,
    -0.523048510267561, -1.2127911138652148, -0.29368307905419427,
    0.71616343282934625, -0.4671527486862771, 1.6668035745230052,
    2.42920916466602, 0.84621556344870019, 3.7357608058357581,
    -1.9681272814746722, 4.1130355124025435, 1.4061294542480631,
    2.1119244221134066, 2.7489145099756489, -0.59410363950633938,
    2.6196346120780221, 3.2190772981896085, -1.0339339342183052,
    3.5120790201061185, 2.815812386706825, -0.30351186151741388,
    0.71583878187901384, -0.51706582962105452, 1.6644506485230319,
    -0.20235929041932432, -2.6357741933268306, -0.35237582338648743,
    -0.24560679227856896, -0.54627619762212165, -0.2549090121843462,
    -0.31866866680771955, 1.1946686213368503, -0.34460891149059936,
    -0.24518163933233836, 4.1416406818893847, 2.8456078072255946,
    -0.29793597171409036, -1.6813867667241549, -0.59644285907195671,
    0.22227959182384907, -0.22498723854718855, 1.1989522555815786,
    14.928736400569901, -0.95500160005036494, -0.26729920337059315,
    -2.1592914271834212, 2.0757771788846959, -2.5270572019955448,
    -0.50084484449122058, -0.73214022507232923, -0.60921922844689846,
    2.618930138558436, -0.32099804574462093, -2.1620223069721494,
    -0.48239076888705035, -2.6491726304961443, -0.49440645706113007,
    -2.6498175052999833, -0.30803773008121249, -0.72293537796944884,
    -0.44720227153213332, 1.1883607291183891, -0.54873960902278129,
    -1.6934413353145323, -0.31863382332161966, -1.202699312010548,
    -0.26599863724369738, 2.6353916400591597, -0.47833972254548507,
    1.1868362624176698, -0.50356637178755748, -2.6502690167481484,
    2.046456466581561, -0.13128123336264638, -0.45011551987813503,
    -2.1682326730372767, 17.906793584764809, -1.7717380730777201,
    -0.44237968202692551, 1.6682511471841135, -0.3211615435085281,
    2.6329214544551105, -0.35134715227242996, 0.23396366690667816,
    -0.65140475606047044, 2.6170176788671329, -0.49795090275092879,
    1.1860018246891622, -0.53523878109912637, 1.6635620054138642,
    -0.29748442280088466, 1.6750888506636485, -0.37960552614618026,
    0.23276390109606929, -0.21696949521832659, -2.6364268160582225,
    -0.47553651905044453, -2.6488123496244009, -0.26450972031647935,
    0.71757290994658984, -0.5220622282280506, 0.70514275806938764,
    -0.41978731186052026, -0.72823701583428857, -0.36228051235599018,
    -0.24601997705532491, -0.308397737799409, 2.153925654713984,
    -0.48303786189070308, -2.6492509880932236, 7.9128359321824755,
    -0.33047523660401229, -0.48497655835140135, 1.6660036963834339,
    -0.45880845426992523, 1.6671020345648981, -0.49967667827055523,
    -1.2114835034156328, -0.56512670752369543, 0.22378642325961856,
    -0.54654315583375468, 1.6629449966884771, -0.46664361633301432,
    -1.2101030130332198, 3.2150711289015961, -0.075336612794233912,
    6.8310040082019983, 1.5358263097439444, -0.66505976315394,
    2.6166483961576552, -0.589063238687966, 0.22264058312689919,
    -0.54434376321562261, -1.6931720420566518, -0.33963822741637328,
    -1.6833353880679842, -0.34934372509388723, 2.6315800861618892,
    -0.3081133017272098, 1.6746609116058955, -0.3668629834718764,
    -1.2050815597192674, -0.30129166359643983, -1.6815126685583397,
    -0.24938764667141136, -2.6379486527949805, -0.34765709560545227,
    -0.24523982766373151, -0.42871153433093534, -2.1672005810494235,
    -0.51217283712485961, -0.73270057788266285, -0.39869456612789106,
    -0.72719287947885447, -0.33950043104304756, 2.1525157401667139,
    -0.53446581184640751, 1.6636764505106869, -0.17873084882495863,
    -2.6344869646269498, -0.23307683078481437, -2.6372624823447928,
    -0.57290138587647021, 0.22328305630040382, -0.58574703589395249,
    -0.25668018939152853, -0.48020045545357715, -2.1697070811274664,
    -0.38591673253709641, -1.2062743823487563, -0.49958084182048396,
    -2.1705194721366947, -0.47572867341385489, -1.2103814685354088,
    -0.53430713275743658, -0.733923343582622, -0.48027527407949905,
    -2.1696467088768161, -0.42019029336582531, 2.1486972042703059,
    -0.53752184897764954, -1.6929275161806763, -0.550322706300613,
    2.621826859600636, -0.29950186168323956, -0.722463285479378,
    4.5036498599701993, -2.4113032434489243, -0.37721785632897953,
    2.1507586110572241, -0.6511179919951855, 2.616903732743785,
    2.3689547205913977, 1.80247972387564, -0.30722111701884791,
    -0.7229106209186742, -0.53654186730521392, 0.7045108514507975,
    -0.58654161586248466, 0.22275263411076174, -0.32006962081170026,
    0.23549112353550702, 11.261337853735437, -2.0888091955057422,
    13.412009446939958, -0.54783529114135487 };

  static const double dv72[176] = { 1.5592198189717252, 8.2256423354472652,
    147.55171420445856, 4.8416986722073512, 2.9572254172194459,
    3.0632966794365668, 9.66367171299433, 7.2027188454636963, 23.426435497113296,
    4.9552536001345118, 7.0697558146188033, 4.9195811689468512, 6.32256285526412,
    1.5228076606978567, 0.8577071237169811, 1.5777234992723812,
    0.2179546102486245, 1.499390582962564, 6.9953935693012887, 1.515185715541262,
    7.1138549133381686, 7.0146390618950232, 7.031288646030994,
    4.8969842090999132, 0.3893643388454886, 3.1338797990622114,
    7.2071296378482721, 2.944168056626784, 41.904566883001337,
    0.84284761301131372, 2.910747741426988, 2.9105891193790874,
    0.62823088240403246, 1.7438626803518624, 23.349169719558457,
    2.9865758197449894, 2.9422559212455859, 4.96463448775068, 7.2785065890010365,
    5.1750195421650256, 0.61631117894036669, 783.03696957413172,
    0.30343599994184095, 1.7299872113908779, 7.2153348276754645,
    245.12089416307879, 14.820467962393664, 22.284418227095045,
    15.900752111219933, 1.4948975923940047, 1.7506389020142379,
    2.9158322807436119, 0.20088540377056835, 2.9368567548098019,
    0.84770962809144, 0.40076958465440271, 0.38317581281939034,
    7.1733110158962772, 3.0724924806585707, 0.17440907709279047,
    0.76758150292608973, 0.79571717947146747, 6.9833740916261782,
    7.2576782839028944, 0.18279192012999351, 2.9332804972100761,
    4.07547485150443, 1.5360269832461377, 13.33878936572086, 7.0472904599766695,
    4.7543244203215984, 1.5306673098751669, 7.22946191233085, 1.7444420299635433,
    0.5991398134446656, 2.9964658466478116, 6.6171379455201844,
    17.829433794503515, 18.894261168388411, 12.016755747873709,
    7.2154446352718482, 11.431478032047853, 20.26349844060114,
    0.60454461172379614, 3.0377530335304512, 6.9882548806267168,
    0.18449141732067309, 0.36339628858128248, 1.5287828340118998,
    0.1788693381444286, 25.250671330424424, 2.9158273025563268,
    0.405152301079307, 1.4881057686732446, 223.77919857379953,
    4.7339883316303695, 10.694868998536059, 0.78687486742239576,
    7.2299431389591433, 4.77738020121704, 7.2508164800773, 7.2659705561779662,
    0.61752280387341574, 1.6121910941742894, 3.168858714662341,
    1.5480131484751989, 7.0160443715092118, 1.6373892039544358,
    7.2775049519304815, 4.2052188318467048, 4.9038369056615387,
    323.79231228696727, 2.9787616731513542, 7.0354201223587953,
    0.17818381884236514, 7.2731096877213171, 1.6545554297164871,
    3.0539190986490761, 2.8944196394268387, 0.19827938913417906,
    6.9978221182861926, 7.2423418444733541, 0.5848762732311189,
    0.76977527940014012, 0.70655053843031146, 0.19177299874322135,
    4.7345048907148577, 7.2518563739328634, 62.722186371646579,
    3.0107705785136352, 2.9897343913599808, 1.7173690618557116,
    0.36944855879190552, 3.0640954831999592, 1.6821055668164302,
    10.342357969123892, 49.021378213773467, 7.2891533176808041,
    0.39656432842864126, 3.163141696554038, 2.9489721542445269, 7.04725478814629,
    2.8994229755619312, 1.5868100142173085, 2.918261521074899,
    7.0209672930951577, 0.18100802919735531, 4.8805519381693436,
    0.79917115191811594, 0.68776684102465513, 4.7485845543438714,
    3.0534730360164772, 6.9724662831110091, 7.0094782098321113,
    0.37807132117002951, 0.40898430968462224, 4.9382212953124931,
    1.6040296099629823, 4.9607357964386187, 1.6913410700820393,
    0.82412758637096839, 4.9380311802321382, 4.7934595582778865,
    3.1549333131700248, 7.1768311627933636, 0.61165456401738361,
    26.097245393076896, 4.7680559141702306, 7.2721397859481973,
    8.8608796231950713, 0.6169845805793317, 0.78421271518329339,
    0.39364980314185738, 0.15790063143056102, 131.180854111204,
    180.18212091102663 };

  double dv73[176];
  double b_f[15];
  double absxk;
  boolean_T exitg1;
  boolean_T rowmatch;
  int exponent;
  bsxfun(X, obj_Mu, b_X);
  trueCount = 0;
  for (i = 0; i < 2; i++) {
    if (obj_Sigma[i] > 0.0) {
      trueCount++;
    }
  }

  partialTrueCount = 0;
  b_partialTrueCount = 0;
  for (i = 0; i < 2; i++) {
    if (obj_Sigma[i] > 0.0) {
      tmp_data[partialTrueCount] = i + 1;
      partialTrueCount++;
      b_tmp_data[b_partialTrueCount] = i + 1;
      b_partialTrueCount++;
    }
  }

  X_size[0] = 15;
  X_size[1] = trueCount;
  for (i4 = 0; i4 < trueCount; i4++) {
    for (b_partialTrueCount = 0; b_partialTrueCount < 15; b_partialTrueCount++)
    {
      X_data[b_partialTrueCount + 15 * i4] = b_X[b_partialTrueCount + 15 *
        (tmp_data[i4] - 1)];
    }
  }

  obj_Sigma_size[0] = 1;
  obj_Sigma_size[1] = trueCount;
  for (i4 = 0; i4 < trueCount; i4++) {
    obj_Sigma_data[i4] = obj_Sigma[tmp_data[i4] - 1];
  }

  b_bsxfun(X_data, X_size, obj_Sigma_data, obj_Sigma_size, c_tmp_data, tmp_data);
  partialTrueCount = tmp_data[1];
  for (i4 = 0; i4 < partialTrueCount; i4++) {
    for (b_partialTrueCount = 0; b_partialTrueCount < 15; b_partialTrueCount++)
    {
      b_X[b_partialTrueCount + 15 * (b_tmp_data[i4] - 1)] =
        c_tmp_data[b_partialTrueCount + tmp_data[0] * i4];
    }
  }

  for (i = 0; i < 15; i++) {
    for (i4 = 0; i4 < 2; i4++) {
      obj_Sigma_data[i4] = b_X[i + 15 * i4] / 0.61;
    }

    b_Gaussian(dv71, dv72, obj_Sigma_data, dv73);
    absxk = 0.0;
    for (i4 = 0; i4 < 176; i4++) {
      absxk += dv73[i4] * obj_Alpha[i4];
    }

    f[i] = -(absxk + -0.8028420988312498);
    b_f[i] = absxk + -0.8028420988312498;
  }

  repmat(f, S);
  for (partialTrueCount = 0; partialTrueCount < 2; partialTrueCount++) {
    tmp_data[partialTrueCount] = 0;
    i = 1;
    exitg1 = false;
    while ((!exitg1) && (i < 3)) {
      rowmatch = true;
      absxk = fabs(obj_ClassNames[i - 1] / 2.0);
      if (absxk <= 2.2250738585072014E-308) {
        absxk = 4.94065645841247E-324;
      } else {
        frexp(absxk, &exponent);
        absxk = ldexp(1.0, exponent - 53);
      }

      if (!(fabs(obj_ClassNames[i - 1] - obj_NonzeroProbClasses[partialTrueCount])
            < absxk)) {
        rowmatch = false;
      }

      if (rowmatch) {
        tmp_data[partialTrueCount] = i;
        exitg1 = true;
      } else {
        i++;
      }
    }
  }

  memcpy(&S[tmp_data[1] * 15 + -15], &b_f[0], 15U * sizeof(double));
}

/*
 * File trailer for CompactClassificationSVM.c
 *
 * [EOF]
 */
